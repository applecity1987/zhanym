html = open('/Users/darknet/dating-site/templates/dashboard.html', 'w', encoding='utf-8')
html.write("""<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zhanym ‚Äî –õ–µ–Ω—Ç–∞</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:Arial,sans-serif;background:#0d0d1a;min-height:100vh;display:flex;flex-direction:column}

/* HEADER */
.header{background:rgba(0,0,0,.6);padding:12px 20px;display:flex;justify-content:space-between;align-items:center;backdrop-filter:blur(10px);position:fixed;top:0;width:100%;z-index:50}
.logo{font-size:22px;font-weight:bold;color:white;text-decoration:none}
.nav a{margin-left:12px;text-decoration:none;color:rgba(255,255,255,.7);font-size:13px;padding:6px 14px;border-radius:20px;border:1px solid rgba(255,255,255,.2);transition:.2s}
.nav a:hover{background:rgba(255,255,255,.1)}

/* MAIN */
.main{flex:1;display:flex;align-items:center;justify-content:center;padding:70px 20px 180px}

/* CARD */
.card-wrap{width:100%;max-width:400px;position:relative}
.card{border-radius:24px;overflow:hidden;position:relative;box-shadow:0 20px 60px rgba(0,0,0,.5);cursor:grab;transition:transform .3s;user-select:none}
.card:active{cursor:grabbing}
.card-photo{width:100%;height:500px;object-fit:cover;display:flex;align-items:center;justify-content:center;font-size:120px;background:linear-gradient(135deg,#ff6b6b,#fd79a8)}
.card-photo img{width:100%;height:100%;object-fit:cover}
.card-gradient{position:absolute;bottom:0;left:0;right:0;height:55%;background:linear-gradient(to top,rgba(0,0,0,.9),transparent)}
.card-info{position:absolute;bottom:90px;left:0;right:0;padding:0 25px}
.card-badge{display:inline-block;background:rgba(0,200,100,.85);color:white;font-size:12px;font-weight:bold;padding:5px 12px;border-radius:20px;margin-bottom:10px;backdrop-filter:blur(5px)}
.card-name{font-size:32px;font-weight:900;color:white;text-shadow:0 2px 10px rgba(0,0,0,.5)}
.card-city{color:rgba(255,255,255,.8);font-size:15px;margin-top:5px;display:flex;align-items:center;gap:5px}
.card-bio{color:rgba(255,255,255,.7);font-size:14px;margin-top:8px;line-height:1.5}

/* SWIPE INDICATORS */
.swipe-like{position:absolute;top:40px;left:25px;background:rgba(0,200,100,.9);color:white;font-size:22px;font-weight:900;padding:10px 20px;border-radius:12px;border:3px solid #00c864;opacity:0;transform:rotate(-15deg);transition:.2s;letter-spacing:2px}
.swipe-skip{position:absolute;top:40px;right:25px;background:rgba(255,50,50,.9);color:white;font-size:22px;font-weight:900;padding:10px 20px;border-radius:12px;border:3px solid #ff3232;opacity:0;transform:rotate(15deg);transition:.2s;letter-spacing:2px}

/* PROGRESS BAR */
.progress-bar{position:absolute;top:15px;left:15px;right:15px;display:flex;gap:4px}
.progress-dot{flex:1;height:3px;background:rgba(255,255,255,.3);border-radius:3px}
.progress-dot.active{background:white}

/* ACTIONS */
.actions{position:fixed;bottom:70px;left:50%;transform:translateX(-50%);display:flex;justify-content:center;align-items:center;gap:15px;padding:12px 30px;background:rgba(13,13,26,.85);border-radius:50px;backdrop-filter:blur(10px);z-index:50}
.btn-action{border-radius:50%;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:.2s;box-shadow:0 5px 20px rgba(0,0,0,.3)}
.btn-action:hover{transform:scale(1.12)}
.btn-back{width:50px;height:50px;background:rgba(255,255,255,.15);font-size:20px;backdrop-filter:blur(10px)}
.btn-skip{width:65px;height:65px;background:white;font-size:28px;color:#ff4444}
.btn-super{width:55px;height:55px;background:linear-gradient(135deg,#4facfe,#00f2fe);font-size:22px}
.btn-like{width:65px;height:65px;background:linear-gradient(135deg,#ff6b6b,#fd79a8);font-size:28px}
.btn-boost{width:50px;height:50px;background:rgba(255,255,255,.15);font-size:20px;backdrop-filter:blur(10px)}

/* BOTTOM NAV */
.bottom-nav{position:fixed;bottom:0;left:0;right:0;background:rgba(13,13,26,.95);display:flex;justify-content:center;gap:30px;padding:10px 0 20px;border-top:1px solid rgba(255,255,255,.1);z-index:40}
.bottom-nav a{display:flex;flex-direction:column;align-items:center;gap:4px;text-decoration:none;color:rgba(255,255,255,.5);font-size:11px;transition:.2s}
.bottom-nav a.active,.bottom-nav a:hover{color:#ff6b6b}
.bottom-nav a span{font-size:22px}

/* FILTERS */
.filters{position:fixed;top:60px;left:0;right:0;padding:10px 20px;display:flex;gap:10px;z-index:40;justify-content:center}
.filters select{padding:7px 14px;border:none;border-radius:20px;font-size:13px;background:rgba(255,255,255,.15);color:white;backdrop-filter:blur(10px);outline:none;cursor:pointer}
.filters select option{background:#1a1a2e;color:white}
.filters button{padding:7px 18px;background:linear-gradient(135deg,#ff6b6b,#fd79a8);color:white;border:none;border-radius:20px;font-size:13px;cursor:pointer;font-weight:bold}

/* EMPTY */
.empty{text-align:center;color:rgba(255,255,255,.6);padding:40px 20px}
.empty h2{font-size:26px;margin-bottom:10px;color:white}

/* MATCH POPUP */
.match-popup{display:none;position:fixed;inset:0;background:rgba(0,0,0,.85);z-index:200;align-items:center;justify-content:center;flex-direction:column}
.match-popup.show{display:flex}
.match-title{font-size:48px;font-weight:900;color:white;margin-bottom:10px}
.match-sub{color:rgba(255,255,255,.7);font-size:18px;margin-bottom:30px}
.match-avatars{display:flex;gap:20px;margin-bottom:30px;font-size:80px}
.match-btn{padding:15px 45px;background:linear-gradient(135deg,#ff6b6b,#fd79a8);color:white;border:none;border-radius:50px;font-size:18px;font-weight:bold;cursor:pointer;margin:5px}
.match-btn-chat{background:transparent;border:2px solid white;color:white}
</style>
</head>
<body>

<div class="header">
  <a href="/" class="logo">üåπ Zhanym</a>
  <div class="nav">
    <a href="/chat">üí¨ –ß–∞—Ç</a>
    <a href="/profile">üë§ –ü—Ä–æ—Ñ–∏–ª—å</a>
    <a href="#" onclick="logout()">–í—ã–π—Ç–∏</a>
  </div>
</div>

<div class="filters">
  <select id="gender"><option value="">üë• –í—Å–µ</option><option value="male">üë® –ú—É–∂—á–∏–Ω—ã</option><option value="female">üë© –ñ–µ–Ω—â–∏–Ω—ã</option></select>
  <select id="city_filter"><option value="">üèôÔ∏è –í—Å–µ –≥–æ—Ä–æ–¥–∞</option><option>–ê–ª–º–∞—Ç—ã</option><option>–ê—Å—Ç–∞–Ω–∞</option><option>–®—ã–º–∫–µ–Ω—Ç</option><option>“ö–∞—Ä–∞“ì–∞–Ω–¥—ã</option><option>–ü–∞–≤–ª–æ–¥–∞—Ä</option><option>”®—Å–∫–µ–º–µ–Ω</option><option>–ê—Ç—ã—Ä–∞—É</option><option>–ê“õ—Ç”©–±–µ</option></select>
  <button onclick="loadUsers()">–ù–∞–π—Ç–∏</button>
</div>

<div class="main">
  <div class="card-wrap">
    <div id="cards"></div>
  </div>
</div>

<div class="actions" id="actions" style="display:none">
  <button class="btn-action btn-back" onclick="goBack()" title="–í–µ—Ä–Ω—É—Ç—å">‚Ü©Ô∏è</button>
  <button class="btn-action btn-skip" onclick="skip()" title="–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å">‚úï</button>
  <button class="btn-action btn-super" onclick="superLike()" title="–°—É–ø–µ—Ä–ª–∞–π–∫">‚≠ê</button>
  <button class="btn-action btn-like" onclick="likeUser()" title="–õ–∞–π–∫">‚ù§Ô∏è</button>
  <button class="btn-action btn-boost" title="–ë—É—Å—Ç">‚ö°</button>
</div>

<div class="bottom-nav">
  <a href="/dashboard" class="active"><span>üî•</span>–°–≤–∞–π–ø–∏—Ç—å</a>
  <a href="/search"><span>üîç</span>–û–±–∑–æ—Ä</a>
  <a href="#"><span>üíõ</span>–õ–∞–π–∫–∏</a>
  <a href="/chat"><span>üí¨</span>–ß–∞—Ç</a>
  <a href="/profile"><span>üë§</span>–ü—Ä–æ—Ñ–∏–ª—å</a>
</div>

<div class="match-popup" id="matchPopup">
  <div class="match-title">üíû –≠—Ç–æ –ü–∞—Ä–∞!</div>
  <div class="match-sub">–í—ã –ø–æ–Ω—Ä–∞–≤–∏–ª–∏—Å—å –¥—Ä—É–≥ –¥—Ä—É–≥—É!</div>
  <div class="match-avatars" id="matchAvatars">üë®üë©</div>
  <button class="match-btn match-btn-chat" onclick="goToChat()">üí¨ –ù–∞–ø–∏—Å–∞—Ç—å</button>
  <button class="match-btn" onclick="closeMatch()">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
</div>

<script>
const token = localStorage.getItem('token');
if(!token) window.location.href = '/login';

let users = [], currentIndex = 0, currentUser = null;

async function loadUsers() {
  const gender = document.getElementById('gender').value;
  const city = document.getElementById('city_filter').value;
  let url = '/search/?';
  if(gender) url += 'gender='+gender+'&';
  if(city) url += 'city='+encodeURIComponent(city)+'&';
  try {
    const res = await fetch(url, {headers:{'Authorization':'Bearer '+token}});
    if(res.status===401){ window.location.href='/login'; return; }
    users = await res.json();
    currentIndex = 0;
    showCard();
  } catch(e){ console.log(e); }
}

function getEmoji(gender){ return gender==='female'?'üë©':'üë®'; }

function showCard() {
  const container = document.getElementById('cards');
  const actions = document.getElementById('actions');
  if(currentIndex >= users.length){
    actions.style.display = 'none';
    container.innerHTML = '<div class="empty"><div style="font-size:80px;margin-bottom:20px">üíî</div><h2>–ù–∏–∫–æ–≥–æ –Ω–µ—Ç</h2><p>–ü–æ–ø—Ä–æ–±—É–π –∏–∑–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã –∏–ª–∏ –∑–∞–π–¥–∏ –ø–æ–∑–∂–µ</p></div>';
    return;
  }
  currentUser = users[currentIndex];
  actions.style.display = 'flex';

  const photoHTML = currentUser.photo
    ? '<img src="/static/uploads/'+currentUser.photo+'" style="width:100%;height:100%;object-fit:cover">'
    : '<div style="width:100%;height:100%;display:flex;align-items:center;justify-content:center;font-size:120px;background:linear-gradient(135deg,#ff6b6b,#fd79a8)">'+getEmoji(currentUser.gender)+'</div>';

  container.innerHTML = `
    <div class="card" id="card">
      <div class="swipe-like" id="swipeLike">–õ–ê–ô–ö ‚ù§Ô∏è</div>
      <div class="swipe-skip" id="swipeSkip">–ü–†–û–ü–£–°–ö ‚úï</div>
      <div class="progress-bar">
        <div class="progress-dot active"></div>
        <div class="progress-dot"></div>
        <div class="progress-dot"></div>
      </div>
      <div class="card-photo">${photoHTML}</div>
      <div class="card-gradient"></div>
      <div class="card-info">
        <div class="card-badge">üìç ${currentUser.city||'–ö–∞–∑–∞—Ö—Å—Ç–∞–Ω'}</div>
        <div class="card-name">${currentUser.name}, ${currentUser.age}</div>
        <div class="card-bio">${currentUser.bio||''}</div>
      </div>
    </div>`;

  initSwipe();
}

function initSwipe() {
  const card = document.getElementById('card');
  let startX = 0, isDragging = false, currentX = 0;

  card.addEventListener('mousedown', e => { startX = e.clientX; isDragging = true; });
  document.addEventListener('mousemove', e => {
    if(!isDragging) return;
    currentX = e.clientX - startX;
    card.style.transform = `translateX(${currentX}px) rotate(${currentX*0.05}deg)`;
    document.getElementById('swipeLike').style.opacity = currentX > 30 ? Math.min((currentX-30)/50,1) : 0;
    document.getElementById('swipeSkip').style.opacity = currentX < -30 ? Math.min((-currentX-30)/50,1) : 0;
  });
  document.addEventListener('mouseup', () => {
    if(!isDragging) return;
    isDragging = false;
    if(currentX > 80) { animateCard('right'); likeUser(); }
    else if(currentX < -80) { animateCard('left'); skip(); }
    else { card.style.transform = ''; }
    currentX = 0;
  });

  // Touch
  card.addEventListener('touchstart', e => { startX = e.touches[0].clientX; isDragging = true; });
  card.addEventListener('touchmove', e => {
    if(!isDragging) return;
    currentX = e.touches[0].clientX - startX;
    card.style.transform = `translateX(${currentX}px) rotate(${currentX*0.05}deg)`;
    document.getElementById('swipeLike').style.opacity = currentX > 30 ? Math.min((currentX-30)/50,1) : 0;
    document.getElementById('swipeSkip').style.opacity = currentX < -30 ? Math.min((-currentX-30)/50,1) : 0;
  });
  card.addEventListener('touchend', () => {
    if(!isDragging) return;
    isDragging = false;
    if(currentX > 80) { animateCard('right'); likeUser(); }
    else if(currentX < -80) { animateCard('left'); skip(); }
    else { card.style.transform = ''; }
    currentX = 0;
  });
}

function animateCard(dir) {
  const card = document.getElementById('card');
  if(card) card.style.transform = `translateX(${dir==='right'?500:-500}px) rotate(${dir==='right'?30:-30}deg)`;
}

function skip(){ currentIndex++; setTimeout(showCard, 300); }
function goBack(){ if(currentIndex>0){ currentIndex--; showCard(); } }
function superLike(){ if(currentUser) likeUser(); }

async function likeUser() {
  if(!currentUser) return;
  try {
    const res = await fetch('/search/like/'+currentUser.id, {method:'POST', headers:{'Authorization':'Bearer '+token}});
    const data = await res.json();
    if(data.message && data.message.includes('–ü–∞—Ä–∞')){
      document.getElementById('matchAvatars').innerHTML = 'üë®üíûüë©';
      document.getElementById('matchPopup').classList.add('show');
    } else {
      currentIndex++; setTimeout(showCard, 300);
    }
  } catch(e){ currentIndex++; setTimeout(showCard, 300); }
}

function closeMatch(){ document.getElementById('matchPopup').classList.remove('show'); currentIndex++; showCard(); }
function goToChat(){ window.location.href='/chat'; }
function logout(){ localStorage.removeItem('token'); window.location.href='/'; }

loadUsers();
</script>
</body>
</html>""")
html.close()
print('Done')