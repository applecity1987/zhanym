<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–í—Ö–æ–¥ ‚Äî Zhanym</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:Arial,sans-serif;background:url('/static/hero.jpg') center center/cover no-repeat;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px}
.box{background:#fff;border-radius:30px;padding:40px;max-width:420px;width:100%;box-shadow:0 20px 60px rgba(0,0,0,.3)}
h1{text-align:center;color:#ff6b6b;margin-bottom:5px;font-size:28px}
.sub{text-align:center;color:#aaa;margin-bottom:25px;font-size:14px}
.group{margin-bottom:15px}
label{display:block;font-size:13px;color:#666;margin-bottom:5px;font-weight:bold}
input{width:100%;padding:12px 15px;border:2px solid #eee;border-radius:12px;font-size:15px;outline:none}
input:focus{border-color:#ff6b6b}
.btn{width:100%;padding:15px;background:url('/static/hero.jpg') center center/cover no-repeat;color:#fff;border:none;border-radius:50px;font-size:18px;font-weight:bold;cursor:pointer;margin-top:10px}
.register{text-align:center;margin-top:15px;color:#aaa;font-size:14px}
.register a{color:#ff6b6b;text-decoration:none;font-weight:bold}
.error{background:#ffe0e0;color:#ff4444;padding:10px 15px;border-radius:10px;margin-bottom:15px;font-size:14px;display:none}
</style>
</head>
<body>
<div class="box">
<div style="text-align:center;font-size:40px;margin-bottom:10px">üíï</div>
<h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å</h1>
<p class="sub">–í–æ–π–¥–∏ –≤ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç</p>
<div class="error" id="error"></div>
<div class="group"><label>–õ–æ–≥–∏–Ω</label><input type="text" id="username" placeholder="username"></div>
<div class="group"><label>–ü–∞—Ä–æ–ª—å</label><input type="password" id="password" placeholder="********"></div>
<button class="btn" onclick="login()">–í–æ–π—Ç–∏</button>
<p class="register">–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a href="/register">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a></p>
</div>
<script>
async function login() {
  const username = document.getElementById('username').value;
  const password = document.getElementById('password').value;
  if(!username||!password){ showError('–ó–∞–ø–æ–ª–Ω–∏ –≤—Å–µ –ø–æ–ª—è'); return; }
  try {
    const form = new FormData();
    form.append('username', username);
    form.append('password', password);
    const res = await fetch('/token', {method:'POST', body: new URLSearchParams({username, password})});
    const data = await res.json();
    if(res.ok){
      localStorage.setItem('token', data.access_token);
      window.location.href = '/dashboard';
    } else {
      showError(data.detail || '–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å');
    }
  } catch(e){ showError('–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞'); }
}
function showError(msg){ const el=document.getElementById('error'); el.textContent=msg; el.style.display='block'; }
</script>
</body>
</html>